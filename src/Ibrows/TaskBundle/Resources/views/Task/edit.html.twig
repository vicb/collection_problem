<script type="text/javascript" src="/bundles/ibrowstask/js/jquery-1.6.2.min.js"></script>
<h1>Test</h1>
<form action="{{ path('task_edit', {'id': id}) }}" method="post" {{ form_enctype(form) }}>

{{ form_row(form.description) }}

<h3>Tags</h3>
<div id="task_tags" data-prototype="{{ form_widget(form.tags.get('prototype')) | e }}">
        {% for tag in form.tags %}
        <li>{{ form_row(tag.name) }}</li>
        {% endfor %}
        <li><a href="#" class="add_tag_link">Add a tag</a></li>
</div>

{{ form_rest(form) }}

<input type="submit" value="Submit" />
</form>
<script type="text/javascript">
function addTagForm() {
    var collectionHolder = $('#task_tags');
    var prototype = collectionHolder.attr('data-prototype');
    form = prototype.replace(/__name__/g, collectionHolder.children().length-1);
    collectionHolder.append(form);
}
$('a.add_tag_link').click(function(event){
    addTagForm();
});
</script>